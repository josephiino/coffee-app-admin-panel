<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoboBrew Admin - Giriş</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
</head>
<body class="login-page">
    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <div class="logo-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                        <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                        <line x1="6" y1="1" x2="6" y2="4"></line>
                        <line x1="10" y1="1" x2="10" y2="4"></line>
                        <line x1="14" y1="1" x2="14" y2="4"></line>
                    </svg>
                </div>
                <h1>RoboBrew Admin</h1>
                <p>Kahve Makinesi Yönetim Paneline Hoş Geldiniz</p>
            </div>
            <div class="login-form">
                <div class="form-group">
                    <label for="email">E-posta</label>
                    <input type="email" id="email" placeholder="E-posta adresinizi girin" required autocomplete="email">
                    <span class="validation-error" id="email-error"></span>
                </div>
                <div class="form-group">
                    <label for="password">Şifre</label>
                    <input type="password" id="password" placeholder="Şifrenizi girin" required autocomplete="current-password">
                    <span class="validation-error" id="password-error"></span>
                </div>
                <div class="form-actions">
                    <button id="login-btn" class="btn btn-primary btn-block">Giriş Yap</button>
                </div>
                <div id="login-error" class="alert alert-error" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Firebase yapılandırma - gerçek bilgilerinizle değiştirin
            const firebaseConfig = {
                apiKey: "AIzaSyDqan-ccv0ewJpRo_U3oZz8WN8-NcXAeno",
                authDomain: "robobrewbetaapp.firebaseapp.com",
                projectId: "robobrewbetaapp",
                storageBucket: "robobrewbetaapp.appspot.com",
                appId: "1:96218340172:web:38bdd8f8a3d4e0af208de9"
            };

            // Lütfen yukarıdaki yapılandırma bilgilerini Firebase konsolundan aldığınız gerçek değerlerle değiştirin.
            // API anahtarını Firebase konsolunda "Proje Ayarları" > "Genel" sekmesinden bulabilirsiniz.
            
            // Firebase başlatma
            firebase.initializeApp(firebaseConfig);
            
            // DOM elementleri
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const loginBtn = document.getElementById('login-btn');
            const loginError = document.getElementById('login-error');
            const emailError = document.getElementById('email-error');
            const passwordError = document.getElementById('password-error');

            // Enter tuşu ile giriş yapma
            passwordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    loginBtn.click();
                }
            });

            // Giriş işlemi
            loginBtn.addEventListener('click', function() {
                // Formu temizle
                clearErrors();
                
                // Form validasyonu
                let isValid = validateForm();
                
                if (isValid) {
                    // Giriş butonunu devre dışı bırak ve yükleniyor durumunu göster
                    loginBtn.disabled = true;
                    loginBtn.textContent = 'Giriş Yapılıyor...';
                    
                    // Firebase ile giriş yap
                    firebase.auth().signInWithEmailAndPassword(emailInput.value, passwordInput.value)
                        .then((userCredential) => {
                            // Giriş başarılı
                            window.location.href = '../index.html';
                        })
                        .catch((error) => {
                            // Giriş başarısız
                            loginBtn.disabled = false;
                            loginBtn.textContent = 'Giriş Yap';
                            
                            // Hata mesajlarını Türkçeleştir
                            let errorMessage = error.message;
                            if (error.code === 'auth/user-not-found') {
                                errorMessage = 'Bu e-posta adresine sahip bir kullanıcı bulunamadı.';
                            } else if (error.code === 'auth/wrong-password') {
                                errorMessage = 'Şifre yanlış. Lütfen tekrar deneyin.';
                            } else if (error.code === 'auth/invalid-credential') {
                                errorMessage = 'Geçersiz giriş bilgileri. Lütfen tekrar deneyin.';
                            } else if (error.code === 'auth/invalid-email') {
                                errorMessage = 'Geçersiz e-posta formatı.';
                            } else if (error.code === 'auth/too-many-requests') {
                                errorMessage = 'Çok fazla başarısız giriş denemesi. Lütfen daha sonra tekrar deneyin.';
                            }
                            
                            showLoginError(errorMessage);
                        });
                }
            });

            // Form validasyonu
            function validateForm() {
                let isValid = true;
                
                // E-posta validasyonu
                if (!emailInput.value) {
                    showError(emailError, 'E-posta alanı boş bırakılamaz');
                    isValid = false;
                } else if (!isValidEmail(emailInput.value)) {
                    showError(emailError, 'Geçerli bir e-posta adresi giriniz');
                    isValid = false;
                }
                
                // Şifre validasyonu
                if (!passwordInput.value) {
                    showError(passwordError, 'Şifre alanı boş bırakılamaz');
                    isValid = false;
                } else if (passwordInput.value.length < 6) {
                    showError(passwordError, 'Şifre en az 6 karakter olmalıdır');
                    isValid = false;
                }
                
                return isValid;
            }
            
            // E-posta validasyonu
            function isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
            
            // Hata gösterme
            function showError(element, message) {
                element.textContent = message;
                element.style.display = 'block';
            }
            
            // Giriş hatası gösterme
            function showLoginError(message) {
                loginError.textContent = message;
                loginError.style.display = 'block';
            }
            
            // Hataları temizleme
            function clearErrors() {
                emailError.textContent = '';
                emailError.style.display = 'none';
                passwordError.textContent = '';
                passwordError.style.display = 'none';
                loginError.textContent = '';
                loginError.style.display = 'none';
            }
            
            // Firebase auth state değişikliğini dinle
            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    // Kullanıcı zaten giriş yapmış, ana sayfaya yönlendir
                    window.location.href = '../index.html';
                }
            });
        });
    </script>
</body>
</html> 